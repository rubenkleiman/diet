<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diet Guidelines</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-brand" onclick="window._client.navigateTo('home')">Diet Guidelines</h1>
            <ul class="nav-menu">
                <li><a href="#" onclick="window._client.navigateTo('home'); return false;">Home</a></li>
                <li><a href="#" onclick="window._client.navigateTo('recipes'); return false;">Recipes</a></li>
                <li><a href="#" onclick="window._client.navigateTo('ingredients'); return false;">Ingredients</a></li>
                <li><a href="#" onclick="window._client.navigateTo('menus'); return false;">Menus</a></li>
                <li class="account-dropdown">
                    <button class="account-btn" onclick="window._client.toggleAccountDropdown()" aria-label="Account menu">
                        <svg class="account-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu" id="accountDropdown">
                        <a href="#" onclick="window._client.navigateTo('profile'); return false;">User Profile</a>
                        <a href="#" onclick="window._client.navigateTo('settings'); return false;">Settings</a>
                    </div>
                </li>
            </ul>
            <!-- Mobile hamburger menu -->
            <button class="hamburger" onclick="window._client.toggleMobileMenu()" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <!-- Mobile menu -->
        <div class="mobile-menu" id="mobileMenu">
            <a href="#" onclick="window._client.navigateTo('home'); window._client.closeMobileMenu(); return false;">Home</a>
            <a href="#" onclick="window._client.navigateTo('recipes'); window._client.closeMobileMenu(); return false;">Recipes</a>
            <a href="#" onclick="window._client.navigateTo('ingredients'); window._client.closeMobileMenu(); return false;">Ingredients</a>
            <a href="#" onclick="window._client.navigateTo('menus'); window._client.closeMobileMenu(); return false;">Menus</a>
            <a href="#" onclick="window._client.navigateTo('profile'); window._client.closeMobileMenu(); return false;">User Profile</a>
            <a href="#" onclick="window._client.navigateTo('settings'); window._client.closeMobileMenu(); return false;">Settings</a>
        </div>
    </nav>

    <div class="container">
        <!-- HOME PAGE (NEW LANDING) -->
        <div id="homePage" class="page active">
            <section class="hero-section">
                <h1>Welcome to Diet Guidelines</h1>
                <p class="hero-description">
                    A comprehensive nutrition tracking application designed to help you make informed dietary choices. 
                    Track recipes, analyze nutritional content, monitor DASH diet adherence, and manage oxalate intake 
                    for kidney stone prevention.
                </p>
            </section>

            <section class="feature-cards">
                <div class="feature-card" onclick="window._client.navigateTo('recipes')">
                    <div class="card-icon">üìã</div>
                    <h2>Recipes</h2>
                    <p>Browse and analyze <span id="recipeCount">0</span> recipes with detailed nutritional breakdowns</p>
                    <span class="card-link">View Recipes ‚Üí</span>
                </div>

                <div class="feature-card" onclick="window._client.navigateTo('ingredients')">
                    <div class="card-icon">ü•ó</div>
                    <h2>Ingredients</h2>
                    <p>Explore <span id="ingredientCount">0</span> ingredients with comprehensive nutrition data</p>
                    <span class="card-link">View Ingredients ‚Üí</span>
                </div>

                <div class="feature-card" onclick="window._client.navigateTo('menus')">
                    <div class="card-icon">üìÖ</div>
                    <h2>Menus</h2>
                    <p>Plan your meals with customized menu collections (Coming Soon)</p>
                    <span class="card-link">View Menus ‚Üí</span>
                </div>
            </section>

            <section class="info-section">
                <div class="info-card">
                    <h3>DASH Diet Adherence</h3>
                    <p>Each recipe is rated for DASH (Dietary Approaches to Stop Hypertension) compliance, helping you maintain a heart-healthy diet.</p>
                </div>
                <div class="info-card">
                    <h3>Oxalate Tracking</h3>
                    <p>Monitor oxalate content in recipes to help prevent kidney stones. Set your risk level and get personalized warnings.</p>
                </div>
                <div class="info-card">
                    <h3>Nutritional Analysis</h3>
                    <p>View detailed nutritional breakdowns with percentage of daily values for all major nutrients.</p>
                </div>
            </section>
        </div>

        <!-- RECIPES PAGE (FORMER HOME PAGE) -->
        <div id="recipesPage" class="page page-with-sidebar">
            <section class="recipe-list-section">
                <h2>Recipes</h2>
                
                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="window._client.createRecipe()">
                        <span class="btn-icon">+</span> Create Recipe
                    </button>
                    <button class="btn btn-secondary" id="editRecipeBtn" onclick="window._client.editRecipe()" disabled>
                        <span class="btn-icon">‚úèÔ∏è</span> Edit Recipe
                    </button>
                    <button class="btn btn-danger" id="deleteRecipeBtn" onclick="window._client.deleteRecipe()" disabled>
                        <span class="btn-icon">üóëÔ∏è</span> Delete
                    </button>
                </div>

                <div class="search-box">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="Search recipes..."
                        aria-label="Search recipes"
                    >
                </div>

                <div class="list-container" id="recipeListContainer">
                    <ul id="recipeList" class="recipe-list">
                        <!-- Recipes will be loaded here -->
                    </ul>
                </div>

                <div class="controls">
                    <label class="checkbox-label">
                        <input type="checkbox" id="summaryCheckbox">
                        <span>Show Details</span>
                    </label>
                </div>
            </section>

            <section class="recipe-details-section" id="recipeDetailsSection" style="display: none;">
                <h2 id="recipeDetailsTitle">Recipe: </h2>
                <div class="details-container" id="recipeDetailsContent">
                    <!-- Recipe details will be loaded here -->
                </div>
            </section>

            <!-- Recipe Edit Panel -->
            <div class="edit-panel" id="recipeEditPanel">
                <div class="edit-panel-header">
                    <h2 id="editPanelTitle">Create New Recipe</h2>
                    <button class="close-btn" onclick="window._client.closeRecipeEditor()">&times;</button>
                </div>
                
                <div class="edit-panel-body">
                    <form id="recipeEditForm" onsubmit="window._client.saveRecipe(event)">
                        <div class="form-group">
                            <label for="recipeNameInput">Recipe Name *</label>
                            <input 
                                type="text" 
                                id="recipeNameInput" 
                                class="form-control"
                                placeholder="Enter recipe name"
                                required
                            >
                            <span class="error-text" id="recipeNameError"></span>
                        </div>

                        <div class="form-group ingredients-editor">
                            <label>Ingredients *</label>
                            
                            <!-- Ingredient Search -->
                            <div class="ingredient-search">
                                <input 
                                    type="text" 
                                    id="ingredientSearchBox"
                                    class="form-control"
                                    placeholder="Search ingredients to add..."
                                    autocomplete="off"
                                >
                                <div class="search-results" id="ingredientSearchResults">
                                    <!-- Search results appear here -->
                                </div>
                            </div>

                            <!-- Selected Ingredients List -->
                            <div class="selected-ingredients" id="selectedIngredientsList">
                                <h4>Selected Ingredients</h4>
                                <div class="ingredient-rows" id="ingredientRows">
                                    <!-- Ingredient rows appear here -->
                                    <div class="no-ingredients-message">No ingredients added yet</div>
                                </div>
                            </div>
                            <span class="error-text" id="ingredientsError"></span>
                        </div>

                        <div class="edit-panel-footer">
                            <button type="button" class="btn btn-secondary" onclick="window._client.closeRecipeEditor()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Recipe</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- SETTINGS PAGE -->
        <div id="settingsPage" class="page">
            <section class="settings-section">
                <h2>Settings</h2>
                <form id="settingsForm" class="settings-form">
                    <div class="form-group">
                        <label for="caloriesPerDayInput">Calories Per Day</label>
                        <input 
                            type="number" 
                            id="caloriesPerDayInput" 
                            min="300" 
                            max="5000" 
                            value="2000"
                            required
                        >
                        <small>Range: 300-5000 calories</small>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="useAgeCheckbox">
                            <span>Use specific age</span>
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="ageInput">Age</label>
                        <input 
                            type="number" 
                            id="ageInput" 
                            min="6" 
                            max="100" 
                            disabled
                        >
                        <small>Range: 6-100 years</small>
                    </div>

                    <div class="form-group">
                        <label for="kidneyRiskSelect">Kidney Stone Risk</label>
                        <select id="kidneyRiskSelect">
                            <option value="Normal">Normal</option>
                            <option value="High">High</option>
                            <option value="Extremely High">Extremely High</option>
                        </select>
                        <small id="kidneyRiskInfo"></small>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="window._client.cancelSettings()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Apply</button>
                    </div>
                </form>
            </section>
        </div>

        <!-- USER PROFILE PAGE -->
        <div id="profilePage" class="page">
            <section class="profile-section">
                <h2>User Profile</h2>
                <div class="profile-content">
                    <div class="profile-avatar">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <div class="profile-info">
                        <div class="profile-field">
                            <label>Display Name</label>
                            <p id="profileDisplayName">Diet System</p>
                        </div>
                        <div class="profile-field">
                            <label>User ID</label>
                            <p class="user-id">a70ff520-1125-4098-90b3-144e22ebe84a</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- INGREDIENTS PAGE -->
        <div id="ingredientsPage" class="page page-single-column">
            <section class="ingredients-section">
                <h2>Ingredients</h2>
                
                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="window._client.createIngredient()">
                        <span class="btn-icon">+</span> Create Ingredient
                    </button>
                    <button class="btn btn-secondary" id="editIngredientBtn" onclick="window._client.editIngredient()" disabled>
                        <span class="btn-icon">‚úèÔ∏è</span> Edit Ingredient
                    </button>
                    <button class="btn btn-danger" id="deleteIngredientBtn" onclick="window._client.deleteIngredient()" disabled>
                        <span class="btn-icon">üóëÔ∏è</span> Delete
                    </button>
                </div>
                
                <div class="search-box">
                    <input 
                        type="text" 
                        id="ingredientSearchInput" 
                        placeholder="Search ingredients..."
                        aria-label="Search ingredients"
                    >
                </div>

                <div class="list-container" id="ingredientListContainer">
                    <ul id="ingredientList" class="ingredient-list">
                        <!-- Ingredients will be loaded here -->
                    </ul>
                </div>

                <div id="ingredientDetailsSection" class="ingredient-details-section" style="display: none;">
                    <h3 id="ingredientDetailsTitle"></h3>
                    <div class="details-container" id="ingredientDetailsContent">
                        <!-- Ingredient details will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Ingredient Edit Panel -->
            <div class="edit-panel" id="ingredientEditPanel">
                <div class="edit-panel-header">
                    <h2 id="ingredientEditPanelTitle">Create New Ingredient</h2>
                    <button class="close-btn" onclick="window._client.closeIngredientEditor()">&times;</button>
                </div>
                
                <div class="edit-panel-body">
                    <form id="ingredientEditForm" onsubmit="window._client.saveIngredient(event)">
                        <div class="form-group">
                            <label for="ingredientNameInput">Ingredient Name *</label>
                            <input 
                                type="text" 
                                id="ingredientNameInput" 
                                class="form-control"
                                placeholder="Enter ingredient name"
                                required
                            >
                            <span class="error-text" id="ingredientNameError"></span>
                        </div>

                        <div class="form-group">
                            <label for="servingSizeInput">Serving Size *</label>
                            <div class="input-group">
                                <input 
                                    type="number" 
                                    id="servingSizeInput" 
                                    class="form-control"
                                    placeholder="100"
                                    step="0.01"
                                    min="0.01"
                                    required
                                >
                                <select id="servingUnitSelect" class="form-control">
                                    <option value="g">g</option>
                                    <option value="ml">ml</option>
                                    <option value="mg">mg</option>
                                    <option value="mcg">mcg</option>
                                </select>
                            </div>
                            <small>Standard serving size for this ingredient</small>
                        </div>

                        <div class="form-group">
                            <label for="densityInput">Density (g/ml)</label>
                            <input 
                                type="number" 
                                id="densityInput" 
                                class="form-control"
                                placeholder="1.0"
                                step="0.01"
                                min="0.01"
                            >
                            <small>Only for liquid ingredients (e.g., milk = 1.03)</small>
                        </div>

                        <div class="form-group">
                            <label for="oxalateInput">Oxalate per Gram (mg/g)</label>
                            <input 
                                type="number" 
                                id="oxalateInput" 
                                class="form-control"
                                placeholder="0.15"
                                step="0.001"
                                min="0"
                            >
                            <small>Oxalate content in milligrams per gram (leave blank if unknown)</small>
                            <span class="error-text" id="oxalateError"></span>
                        </div>

                        <div class="form-group">
                            <h4>Nutritional Information (per serving)</h4>
                            <small>Leave blank if unknown. Scroll to see all fields.</small>
                        </div>

                        <div class="nutrition-inputs-scroll">
                            <div class="nutrition-inputs">
                                <div class="form-group">
                                    <label for="caloriesInput">Calories</label>
                                    <input type="number" id="caloriesInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="sodiumInput">Sodium (mg)</label>
                                    <input type="number" id="sodiumInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="cholesterolInput">Cholesterol (mg)</label>
                                    <input type="number" id="cholesterolInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="sugarsInput">Sugars (g)</label>
                                    <input type="number" id="sugarsInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="proteinInput">Protein (g)</label>
                                    <input type="number" id="proteinInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="dietaryFiberInput">Dietary Fiber (g)</label>
                                    <input type="number" id="dietaryFiberInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="carbohydratesInput">Carbohydrates (g)</label>
                                    <input type="number" id="carbohydratesInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="calciumInput">Calcium (mg)</label>
                                    <input type="number" id="calciumInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="potassiumInput">Potassium (mg)</label>
                                    <input type="number" id="potassiumInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="magnesiumInput">Magnesium (mg)</label>
                                    <input type="number" id="magnesiumInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="seleniumInput">Selenium (mcg)</label>
                                    <input type="number" id="seleniumInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="manganeseInput">Manganese (mg)</label>
                                    <input type="number" id="manganeseInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="zincInput">Zinc (mg)</label>
                                    <input type="number" id="zincInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="ironInput">Iron (mg)</label>
                                    <input type="number" id="ironInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="fatInput">Fat (g)</label>
                                    <input type="number" id="fatInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="saturatedFatInput">Saturated Fat (g)</label>
                                    <input type="number" id="saturatedFatInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="polysaturatedFatInput">Polyunsaturated Fat (g)</label>
                                    <input type="number" id="polysaturatedFatInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="monosaturatedFatInput">Monounsaturated Fat (g)</label>
                                    <input type="number" id="monosaturatedFatInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="thiaminInput">Thiamin (mg)</label>
                                    <input type="number" id="thiaminInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="riboflavinInput">Riboflavin (mg)</label>
                                    <input type="number" id="riboflavinInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="niacinInput">Niacin (mg)</label>
                                    <input type="number" id="niacinInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="folicAcidInput">Folic Acid (mcg)</label>
                                    <input type="number" id="folicAcidInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="phosphorusInput">Phosphorus (mg)</label>
                                    <input type="number" id="phosphorusInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="vitaminAInput">Vitamin A (IU)</label>
                                    <input type="number" id="vitaminAInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="vitaminB6Input">Vitamin B6 (mg)</label>
                                    <input type="number" id="vitaminB6Input" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="vitaminCInput">Vitamin C (mg)</label>
                                    <input type="number" id="vitaminCInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="vitaminDInput">Vitamin D (IU)</label>
                                    <input type="number" id="vitaminDInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="vitaminEInput">Vitamin E (mg)</label>
                                    <input type="number" id="vitaminEInput" class="form-control" step="0.1" min="0">
                                </div>

                                <div class="form-group">
                                    <label for="vitaminKInput">Vitamin K (mcg)</label>
                                    <input type="number" id="vitaminKInput" class="form-control" step="0.1" min="0">
                                </div>
                            </div>
                        </div>

                        <div class="edit-panel-footer">
                            <button type="button" class="btn btn-secondary" onclick="window._client.closeIngredientEditor()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Ingredient</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- MENUS PAGE (STUB) -->
        <div id="menusPage" class="page">
            <section class="menus-section">
                <h2>Menus</h2>
                <div class="coming-soon">
                    <div class="coming-soon-icon">üöß</div>
                    <h3>Coming Soon</h3>
                    <p>Menu planning and meal collections will be available in a future update.</p>
                    <button class="btn btn-primary" onclick="window._client.navigateTo('home')">Back to Home</button>
                </div>
            </section>
        </div>
    </div>

    <script src="/js/client.js"></script>
</body>
</html>
